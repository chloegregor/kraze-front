---
import Layout from '../../layouts/Layout.astro';
import {getPieceUniques} from '../../lib/api/piece-uniques.js';
import ProductCart from '../../components/ProductCart';

const toutesLespieceUniques = await getPieceUniques();

const pieceUniques = toutesLespieceUniques.filter(piece => (piece.stock - piece.reserved) > 0);
console.log("voila ce qu'il y a dans la vue", pieceUniques);
---

<Layout>
    <h1 class="lg:mt-[2em] lg:mb-[0em] mb-[2em] text-center">PIECES UNIQUES</h1>

  <div class="fullscreen">
    <div class="container mt-[auto]">
      {pieceUniques.length > 0 ?
        <div class=" grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">

          pieceUniques.map(piece => (
            <ProductCart piece_unique={piece} />
          ))

        </div>
      : <p class="text-center lg:mt-[1em]">Aucune pi√®ce unique disponible pour le moment.</p>}
    </div>

  </div>
</Layout>
